magisk_setup_cmake() {
	local MAGISK_CMAKE_MAJORVESION=3.19
	local MAGISK_CMAKE_MINORVERSION=4
	local MAGISK_CMAKE_VERSION=$MAGISK_CMAKE_MAJORVESION.$MAGISK_CMAKE_MINORVERSION
	local MAGISK_CMAKE_TARNAME=cmake-${MAGISK_CMAKE_VERSION}-Linux-x86_64.tar.gz
	local MAGISK_CMAKE_TARFILE=$MAGISK_MODULE_TMPDIR/$MAGISK_CMAKE_TARNAME
	local MAGISK_CMAKE_FOLDER

	MAGISK_CMAKE_FOLDER=$MAGISK_COMMON_CACHEDIR/cmake-$MAGISK_CMAKE_VERSION

	if [ ! -d "$MAGISK_CMAKE_FOLDER" ]; then
		magisk_download https://cmake.org/files/v$MAGISK_CMAKE_MAJORVESION/$MAGISK_CMAKE_TARNAME \
			"$MAGISK_CMAKE_TARFILE" \
			ff23e1f53c53e8ef1fa87568345031d86c504e53efb52fa487db0b8e0ee4d3ff
		rm -Rf "$MAGISK_MODULE_TMPDIR/cmake-${MAGISK_CMAKE_VERSION}-Linux-x86_64"
		tar xf "$MAGISK_CMAKE_TARFILE" -C "$MAGISK_MODULE_TMPDIR"
		mv "$MAGISK_MODULE_TMPDIR/cmake-${MAGISK_CMAKE_VERSION}-Linux-x86_64" \
			"$MAGISK_CMAKE_FOLDER"
	fi

		export PATH=$MAGISK_CMAKE_FOLDER/bin:$PATH

	export CMAKE_INSTALL_ALWAYS=1
}
